(this["webpackJsonpsplashun-client"]=this["webpackJsonpsplashun-client"]||[]).push([[0],{32:function(e,t,a){},36:function(e,t,a){e.exports=a(93)},41:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),u=(a(41),a(2)),o=a(3),s=a(12),i=a.n(s),m=a(4),d=a.n(m),p=a(6),E=a(7),f=a.n(E),b="https://fierce-refuge-37760.herokuapp.com",v=a(34),h=a.n(v),S=a(35),g=a.n(S),O=(a(84),function(e){var t=e.imageURL,a=e.label,c=e.index,l=e.setViewer,o=e.id,s=e.token,m=Object(n.useState)(!1),E=Object(u.a)(m,2),v=E[0],h=E[1],S=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("".concat(b,"/pictures/").concat(o),{headers:{"x-auth-token":s}});case 3:alert("Picture successfully deleted!"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),alert("Not authorized");case 10:h(!1);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"list-element",onClick:function(){return l({isOpen:!0,index:c})}},r.a.createElement("img",{src:t,alt:a,className:"photo"}),r.a.createElement("div",{className:"overlay"},r.a.createElement("p",{className:"label"},a),r.a.createElement("button",{className:"delete",onClick:function(e){e.stopPropagation(),h(!0)}},"delete"))),r.a.createElement(i.a,{className:"modal",overlayClassName:"modal-overlay",isOpen:v,onRequestClose:function(){return h(!1)}},r.a.createElement("h2",null,"Are you sure you want to delete this picture ?"),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{type:"button",onClick:function(){return h(!1)},className:"cancel"},"Cancel"),r.a.createElement("button",{type:"button",onClick:function(){return S()},className:"submit"},"Delete"))))}),C=(a(85),function(){return r.a.createElement("div",{className:"spinner-overlay"},r.a.createElement("div",{className:"spinner-container"}))}),N={PICTURE_ADD_SUCCESS:"PICTURE_ADD_SUCCESS",PICTURE_ADD_FAILURE:"PICTURE_ADD_FAILURE",TOGGLE_ADD_PICTURE:"TOGGLE_ADD_PICTURE",PICTURE_FETCH_SUCCESS:"PICTURE_FETCH_SUCCESS",PICTURE_FETCH_FAILURE:"PICTURE_FETCH_FAILURE"},y=function(){return{type:N.TOGGLE_ADD_PICTURE}},I=a(8),R=function(e){return e.user},_=Object(I.a)([R],(function(e){return e.token})),j=(Object(I.a)([R],(function(e){return e.err})),function(e){return e.picture}),U=Object(I.a)([j],(function(e){return e.pictureAdded})),A=Object(I.a)([j],(function(e){return e.hidden})),k=(Object(I.a)([j],(function(e){return e.err})),a(86),Object(o.b)((function(e){return{token:_(e),picture:U(e)}}),(function(e){return{pictureFetchFailure:function(t){return e(function(e){return{type:N.PICTURE_FETCH_FAILURE,payload:e}}(t))}}}))((function(e){var t=e.token,a=e.search,c=(e.picture,e.pictureFetchFailure),l=Object(n.useState)([]),o=Object(u.a)(l,2),s=o[0],i=o[1],m=Object(n.useState)(!0),E=Object(u.a)(m,2),v=E[0],S=E[1],N=Object(n.useState)({isOpen:!1,index:0}),y=Object(u.a)(N,2),I=y[0],R=y[1];Object(n.useEffect)((function(){(function(){var e=Object(p.a)(d.a.mark((function e(){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("".concat(b,"/pictures"),{headers:{"x-auth-token":t}});case 3:a=e.sent,n=a.data,i(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c(e.t0);case 11:S(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[i,t,s,c]);var _=s.filter((function(e){return e.label.toLowerCase().includes(a.toLowerCase())})),j=_.map((function(e){return e.imageURL}));return v?r.a.createElement(C,null):r.a.createElement(n.Fragment,null,r.a.createElement(h.a,{breakpointCols:{default:3,600:1},className:"masonry",columnClassName:"masonry-column"},_.map((function(e,a){return r.a.createElement(O,{key:e._id,imageURL:e.imageURL,label:e.label,setViewer:R,index:a,token:t,id:e._id})}))),I.isOpen&&r.a.createElement(g.a,{src:j,currentIndex:I.index,onClose:function(){R({isOpen:!1,index:0})}}))}))),D=a(9),w=a(1),T=(a(87),Object(o.b)((function(e){return{token:_(e)}}),(function(e){return{pictureAddSuccess:function(t){return e({type:N.PICTURE_ADD_SUCCESS})},pictureAddFailure:function(t){return e(function(e){return{type:N.PICTURE_ADD_FAILURE,payload:e}}(t))},toggleAddPicture:function(){return e(y())}}}))((function(e){var t=e.token,a=e.pictureAddSuccess,c=e.pictureAddFailure,l=e.toggleAddPicture,o=Object(n.useState)({label:"",imageURL:""}),s=Object(u.a)(o,2),i=s[0],m=s[1],E=i.label,v=i.imageURL,h=function(){var e=Object(p.a)(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,f()({method:"post",url:"".concat(b,"/pictures"),headers:{"x-auth-token":t},data:{label:E,imageURL:v}});case 4:r=e.sent,a(r),l(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),alert("Oops there was a problem with your request! Check if you entered both a label and a URL"),c(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=e.target,a=t.value,n=t.name;m(Object(w.a)(Object(w.a)({},i),{},Object(D.a)({},n,a)))};return r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Add a photo"),r.a.createElement("form",{className:"add-picture-form",onSubmit:h},r.a.createElement("label",{className:"label"},"Label"),r.a.createElement("input",{type:"text",name:"label",placeholder:"Ex: My cute dog",required:!0,value:E,onChange:S,className:"add-picture-input"}),r.a.createElement("label",{className:"label"},"Photo URL"),r.a.createElement("input",{type:"text",name:"imageURL",placeholder:"https://images.unsplash.com/photo-15834235436",required:!0,value:v,onChange:S,className:"add-picture-input"}),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{className:"cancel",type:"button",onClick:l},"Cancel"),r.a.createElement("button",{className:"submit",type:"button",onClick:h},"Submit"))))}))),x={SIGN_IN_START:"SIGN_IN_START",SIGN_IN_SUCCESS:"SIGN_IN_SUCCESS",SIGN_IN_FAILURE:"SIGN_IN_FAILURE",REGISTER_SUCCESS:"REGISTER_SUCCESS",REGISTER_FAILURE:"REGISTER_FAILURE"},F={ADD_DANGER:"ADD_DANGER"},L=function(e){return{type:F.ADD_DANGER,payload:e}},P=(a(32),Object(o.b)(null,(function(e){return{signInStart:function(){return e({type:x.SIGN_IN_START})},signInSuccess:function(t){return e(function(e){return{type:x.SIGN_IN_SUCCESS,payload:e}}(t))},signInFailure:function(t){return e(function(e){return{type:x.SIGN_IN_FAILURE,payload:e}}(t))},addDanger:function(t){return e(L(t))}}}))((function(e){var t=e.signInStart,a=e.signInSuccess,c=e.signInFailure,l=(e.setShowRegister,e.setIsLoading),o=e.addDanger,s=Object(n.useState)({email:"",password:""}),i=Object(u.a)(s,2),m=i[0],E=i[1],v=m.email,h=m.password,S=function(){var e=Object(p.a)(d.a.mark((function e(n){var r,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t(),l(!0),e.prev=3,e.next=6,f.a.post("".concat(b,"/users/signin"),{email:v,password:h});case 6:if("Wrong credentials"!==(r=e.sent).data){e.next=11;break}return c(r.data),l(!1),e.abrupt("return",o("Wrong credentials"));case 11:u=r.data,l(!1),a(u),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),l(!1),c(e.t0);case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.target,a=t.value,n=t.name;E(Object(w.a)(Object(w.a)({},m),{},Object(D.a)({},n,a)))};return r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{className:"signin-form",onSubmit:S,autoComplete:"off"},r.a.createElement("h3",null,"Sign in"),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("input",{type:"email",name:"email",required:!0,value:v,onChange:g,autoComplete:"off",className:"input",placeholder:"Enter email"})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("input",{type:"password",name:"password",required:!0,value:h,onChange:g,className:"input",placeholder:"Enter password"})),r.a.createElement("button",{className:"button",onClick:S},"Sign In")))}))),G=Object(o.b)(null,(function(e){return{registerSuccess:function(t){return e(function(e){return{type:x.REGISTER_SUCCESS,payload:e}}(t))},registerFailure:function(t){return e(function(e){return{type:x.REGISTER_FAILURE,payload:e}}(t))},addDanger:function(t){return e(L(t))}}}))((function(e){var t=e.registerSuccess,a=e.registerFailure,c=e.setIsLoading,l=e.addDanger,o=Object(n.useState)({name:"",email:"",password:""}),s=Object(u.a)(o,2),i=s[0],m=s[1],E=i.name,v=i.email,h=i.password,S=function(e){var t=e.target,a=t.name,n=t.value;m(Object(w.a)(Object(w.a)({},i),{},Object(D.a)({},a,n)))},g=function(){var e=Object(p.a)(d.a.mark((function e(){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,f()({method:"post",url:"".concat(b,"/users/register"),data:i});case 4:n=e.sent,r=n.data,c(!1),t(r),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),"User already exists"===e.t0.response.data&&l("It seems you are already registered!"),c(!1),a(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{className:"signin-form",onSubmit:g},r.a.createElement("h3",null,"Sign Up"),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Name"),r.a.createElement("input",{type:"text",name:"name",required:!0,placeholder:"Enter name",value:E,onChange:S,className:"input"})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"Enter email",value:v,onChange:S,className:"input"})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("input",{type:"password",name:"password",required:!0,value:h,onChange:S,className:"input",placeholder:"Enter password"})),r.a.createElement("button",{className:"button",onClick:g},"Register")))})),H=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(u.a)(l,2),s=o[0],i=o[1];return s?r.a.createElement(C,null):r.a.createElement(n.Fragment,null,a?r.a.createElement(G,{setIsLoading:i}):r.a.createElement(P,{setIsLoading:i}),r.a.createElement("p",null,a?"Already have an account ?":"Don't have an account ?",r.a.createElement("span",{className:"register-link",onClick:function(){return c(!a)}}," ",a?"Sign in here":"Register here")))},q=(a(88),function(e){var t=e.setSearch;return r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"text",onChange:function(e){t(e.target.value)},className:"searchbar",placeholder:"Search high-resolution photos"}))});function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var B=r.a.createElement("g",null,r.a.createElement("path",{d:"M63.2,19.9c-0.8-0.8-1.9-1.3-3.2-1.3H48v-4c0-0.8-0.3-4-4.5-4H20.3c-4,0-4.3,3.2-4.3,4v4H4c-2.1,0-4,1.9-4,4v26.7 c0,2.1,1.9,4,4,4h56c2.1,0,4-1.9,4-4V22.8C64,21.8,63.7,20.7,63.2,19.9z M58.7,47.9H5.3v-24H16c2.9,0,5.3-2.4,5.3-5.3v-2.7h21.3 v2.7c0,2.9,2.4,5.3,5.3,5.3h10.7v24H58.7z"}),r.a.createElement("path",{d:"M30.7,23.9c-5.1,0-9.3,4.3-9.3,9.3c0,5.3,4,9.3,9.3,9.3c5.1,0,9.3-4.3,9.3-9.3S35.7,23.9,30.7,23.9z M30.7,37.3 c-2.4,0-4-1.6-4-4c0-2.1,1.9-4,4-4s4,1.9,4,4C34.7,35.3,32.8,37.3,30.7,37.3z"}),r.a.createElement("circle",{cx:10.7,cy:29.2,r:2.7})),V=function(e){var t=e.svgRef,a=e.title,n=z(e,["svgRef","title"]);return r.a.createElement("svg",M({id:"Layer_2_1_",x:"0px",y:"0px",viewBox:"0 0 64 64",style:{enableBackground:"new 0 0 64 64"},xmlSpace:"preserve",ref:t},n),a?r.a.createElement("title",null,a):null,B)},J=r.a.forwardRef((function(e,t){return r.a.createElement(V,M({svgRef:t},e))})),W=(a.p,a(89),Object(o.b)(null,(function(e){return{toggleAddPicture:function(){return e(y())}}}))((function(e){var t=e.setSearch,a=e.toggleAddPicture;return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"logo-container"},r.a.createElement(J,{className:"logo"})),r.a.createElement("div",{className:"nav-container"}," ",r.a.createElement(q,{setSearch:t}),r.a.createElement("button",{className:"add-picture-btn",onClick:a},"Submit a photo")))}))),K=Object(I.a)([function(e){return e.alerts}],(function(e){return e.err})),Q=(a(90),Object(o.b)((function(e){return{error:K(e)}}))((function(e){var t=e.error;return t&&r.a.createElement("div",{className:"alert"},t)})));a(91);i.a.setAppElement("#root");var X=Object(o.b)((function(e){return{token:_(e),hidden:A(e)}}),(function(e){return{toggleAddPicture:function(){return e(y())}}}))((function(e){var t=e.token,a=e.hidden,c=e.toggleAddPicture,l=Object(n.useState)(""),o=Object(u.a)(l,2),s=o[0],m=o[1];return r.a.createElement("div",{className:"App"},r.a.createElement(Q,null),t?r.a.createElement(n.Fragment,null,r.a.createElement(W,{setSearch:m}),r.a.createElement(k,{search:s}),r.a.createElement(i.a,{isOpen:!a,onRequestClose:c,className:"modal",overlayClassName:"modal-overlay"},r.a.createElement(T,null))):r.a.createElement(n.Fragment,null,r.a.createElement(H,null)))})),Y=a(10),Z=(a(92),{token:null,err:null}),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.SIGN_IN_SUCCESS:return Object(w.a)(Object(w.a)({},e),{},{token:t.payload});case x.SIGN_IN_FAILURE:return Object(w.a)(Object(w.a)({},e),{},{err:t.payload});case x.REGISTER_SUCCESS:return Object(w.a)(Object(w.a)({},e),{},{token:t.payload});case x.REGISTER_FAILURE:return Object(w.a)(Object(w.a)({},e),{},{err:t.payload});default:return e}},ee={hidden:!0,err:null},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.PICTURE_ADD_SUCCESS:return Object(w.a)(Object(w.a)({},e),{},{pictureAdded:!0});case N.PICTURE_ADD_FAILURE:return Object(w.a)(Object(w.a)({},e),{},{err:t.payload});case N.TOGGLE_ADD_PICTURE:return Object(w.a)(Object(w.a)({},e),{},{hidden:!e.hidden});case N.PICTURE_FETCH_FAILURE:return Object(w.a)(Object(w.a)({},e),{},{err:t.payload});default:return e}},ae={err:null},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F.ADD_DANGER:return Object(w.a)(Object(w.a)({},e),{},{err:t.payload});default:return e}},re=Object(Y.c)({user:$,picture:te,alerts:ne});var ce=Object(Y.d)(re,Y.a.apply(void 0,[]));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:ce},r.a.createElement(X,null))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.75ac4adb.chunk.js.map